# Microservice "Questionnaire"

Микросервис "Анкета". Бэк создан на основе шаблона для бэкенда с FastAPI.\
Реализована страница Анкеты для сбора основных данных о респондентах и следующие методы API для внутреннего использования:
* GET http://{HOST}:{PORT}/api/questionnaire/get-age-and-gender/{respondent_token}" --- возвращает пол и возраст респондента с указанным токеном, либо ошибку 404, если его результатов нет в базе данных.
* GET http://{HOST}:{PORT}/api/questionnaire/fetch-results/{respondent_token}" --- возвращает данные заполненной респондентом с указанным токеном анкеты, либо ошибку 404, если он её не заполнял.


Конфигурационный файл с переменными окружения должен находиться по пути "questionnaire/backend/.env" .
В нём находятся следующие переменные:\
PORT --- порт, на котором будет запускаться микросервис\
HOST --- хост, на котором будет запускаться микросервис\
SQLALCHEMY_DATABASE_URI="sqlite+aiosqlite:///app/storage/questionnaire_database.db"--- путь к базе данных относительно "user/backend"\
BEARER_TOKEN --- токен доступа, с которым другие сервисы должны посылать запросы\
TOKEN_SERVICE_HOST --- хост, на котором запущен микросервис "Пользователя" (который предоставляет и обрабатывает токены пользователей)\
TOKEN_SERVICE_PORT --- порт, на котором запущен микросервис "Пользователя" (который предоставляет и обрабатывает токены пользователей)\